# Interpreter
Реализован консольный интерпретатор для специализированного языка, оперирующего с матрицами в регистрах $0–$9. Поддерживает загрузку, вывод, базовые арифметические операции и выборку элементов. Обеспечена строгая проверка корректности команд, синтаксиса и размеров матриц.

```bash
./interpreter
```

После запуска приложение готово принимать команды. По умолчанию в каждом регистре находится нулевая матрица (0х0).
* `load $<register number> <file.txt>` — загрузка матрицы в данный регистр из файла. В файле сперва идет размер матрицы, а потом перечисление ее элементов
* `print $<register number>` — вывод матрицы, лежащей в данном регистре.
* `add $<one> $<two>` — поэлементное сложение двух матриц, результат которого записывается в первый регистер.
* `mul $<one> $<two>` — умножение матриц двух матриц, результат которого записывается в первый регистер (наивный $O(n^3)$).
* `elem $n i j` — вывод элемента в `i` строке и в `j` столбце.
* `exit` — завершение работы.

Особенности:
* Гарантирована строгая семантика исключений: в случае ошибки состояние регистров не изменяется.
* Вся валидация регистров, имен команд и синтаксиса централизована.
* Использованы noexcept-аннотации для функций, которые не могут кидать исключения.

Обработаны ошибки:
* Общие ошибки обработки команд
    * Неизвестная команда - первый токен команды не совпадает ни с одной из известных команд.
    * Неверный формат команды - неправильное количество аргументов, неожиданный тип аргумента, лишние/недостающие параметры.
    * Неверный регистр - аргумент, ожидающий регистр, не соответствует шаблону $<цифра 0-9>.
* Ошибки команды load
    * Файл не удалось открыть - файл по заданному пути не удалось открыть для чтения.
    * Некорректный формат файла - файл не содержит достаточного количества чисел или элементы не представляют собой числа.
* Ошибки команды add
    * Несовпадение размеров матриц - различие количества строк или столбцов между матрицами A и B.
* Ошибки команды mul
    * Невозможно перемножить матрицы - число столбцов матрицы A не совпадает с числом строк матрицы B.
* Ошибки команды elem
    * Элемент вне границ матрицы - запрашиваемая ячейка матрицы отсутствует (индексы выходят за границы).
* Системные ошибки
    * Ошибка выделения памяти - выброшено исключение std::bad_alloc при выполнении команды.

Основные компоненты:
* Класс `matrix` — value-семантика, реализует арифметику и доступ к элементам с полной проверкой границ и размеров.
* Класс `matrix_interpreter` - обрабатывает команды, управляет регистрами, обрабатывает исключения и форматирует ошибки.

## Инструкция по запуску
Перейти в папку проекта и построить его:
```bash
mkdir build && cd build && cmake .. && make
```
Приложение interpreter будет лежать в папке build

**Тестирование**\
Из папки build запустить тесты:
```bash
./../test/run-test-data.sh
```

К проекту опубликована лишь часть тестов.\
Добавить свои тесты можно в папку data-test. Править скрипт или команды не требуется